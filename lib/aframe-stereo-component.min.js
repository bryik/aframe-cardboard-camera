!function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){!function(){if(!AFRAME)return void console.error("Component attempted to register before AFRAME was available.");var e={stereo:r(1).stereo_component,stereocam:r(1).stereocam_component};Object.keys(e).forEach(function(t){AFRAME.aframeCore?AFRAME.aframeCore.registerComponent(t,e[t]):AFRAME.registerComponent(t,e[t])})}()},function(e,t){e.exports={stereo_component:{schema:{eye:{type:"string","default":"left"},mode:{type:"string","default":"full"}},init:function(){this.video_click_event_added=!1,this.material_is_a_video=!1,null!==this.el.getAttribute("material")&&"src"in this.el.getAttribute("material")&&null!==document.querySelector(this.el.getAttribute("material").src)&&"VIDEO"===document.querySelector(this.el.getAttribute("material").src).tagName&&(this.material_is_a_video=!0);var e=this.el.object3D.children[0];if((e.geometry instanceof THREE.SphereGeometry||e.geometry instanceof THREE.SphereBufferGeometry)&&this.material_is_a_video){if("half"===this.data.mode)var t=this.el.getAttribute("geometry"),r=new THREE.SphereGeometry(t.radius||100,t.segmentsWidth||64,t.segmentsHeight||64,Math.PI/2,Math.PI,0,Math.PI);else var t=this.el.getAttribute("geometry"),r=new THREE.SphereGeometry(t.radius||100,t.segmentsWidth||64,t.segmentsHeight||64);if(e.rotation.y=Math.PI/2,"left"===this.data.eye)for(var i=r.faceVertexUvs[0],a=0;a<i.length;a++)for(var o=0;3>o;o++)i[a][o].x*=.5;if("right"===this.data.eye)for(var i=r.faceVertexUvs[0],a=0;a<i.length;a++)for(var o=0;3>o;o++)i[a][o].x*=.5,i[a][o].x+=.5;e.geometry=(new THREE.BufferGeometry).fromGeometry(r)}else this.video_click_event_added=!0},update:function(e){var t=this.el.object3D.children[0],r=this.data;"both"===r.eye?t.layers.set(0):t.layers.set("left"===r.eye?1:2)},tick:function(e){if(!this.video_click_event_added&&"undefined"!=typeof this.el.sceneEl.canvas){this.videoEl=this.el.object3D.children[0].material.map.image;var t=this;this.el.sceneEl.canvas.onclick=function(){t.videoEl.play()},this.video_click_event_added=!0}}},stereocam_component:{schema:{eye:{type:"string","default":"left"}},init:function(){this.layer_changed=!1},tick:function(e){var t=this.data;if(!this.layer_changed){var r=[];this.el.object3D.children.forEach(function(e,t,i){r[t]=e.type});var i=r.indexOf("PerspectiveCamera"),a=this.el.object3D.children[i];"both"===t.eye?(a.layers.enable(1),a.layers.enable(2)):a.layers.enable("left"===t.eye?1:2)}}}}}]);